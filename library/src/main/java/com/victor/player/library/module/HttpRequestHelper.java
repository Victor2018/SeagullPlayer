package com.victor.player.library.module;import android.content.Context;import android.os.Handler;import android.os.HandlerThread;import android.os.Message;import java.util.HashMap;import com.victor.player.library.interfaces.OnHttpListener;import com.victor.player.library.util.Constant;import com.victor.player.library.util.HttpActions;/** * Created by victor on 2016/1/21. */public class HttpRequestHelper {    private String TAG = "HttpRequestHelper";    private Handler mRequestHandler;    private HandlerThread mRequestHandlerThread;    private OnHttpListener mOnHttpListener;    public HttpRequestHelper (OnHttpListener listener) {        mOnHttpListener = listener;        startRequestTask ();    }    private void startRequestTask (){        mRequestHandlerThread = new HandlerThread("HttpRequestTask");        mRequestHandlerThread.start();        mRequestHandler = new Handler(mRequestHandlerThread.getLooper()){            @Override            public void handleMessage(Message msg) {                switch (msg.what) {                    case Constant.Msg.REQUEST_VIMEO_PLAY_URL:                        HashMap<Integer,Object> vimeoMap = (HashMap<Integer, Object>) msg.obj;                        String vimeoUrl = (String) vimeoMap.get(Constant.Msg.REQUEST_VIMEO_PLAY_URL);                        HttpActions.requestVimeoPlayUrl(vimeoUrl,mOnHttpListener);                        break;                    case Constant.Msg.REQUEST_YOUTUBE_PLAY_URL:                    	HashMap<Integer,Object> youtubeMap = (HashMap<Integer, Object>) msg.obj;                    	String youtubeUrl = (String) youtubeMap.get(Constant.Msg.REQUEST_YOUTUBE_PLAY_URL);                    	HttpActions.requestYoutbePlayUrl(youtubeUrl,mOnHttpListener);                    	break;                    case Constant.Msg.REQUEST_YOUTUBE_CHECK_PLAY_URL:                    	HashMap<Integer,Object> youtubeCheckMap = (HashMap<Integer, Object>) msg.obj;                    	String youtubeCheckUrl = (String) youtubeCheckMap.get(Constant.Msg.REQUEST_YOUTUBE_CHECK_PLAY_URL);                    	HttpActions.requestCheckYoutubePlayUrl(youtubeCheckUrl,mOnHttpListener);                    	break;                    case Constant.Msg.REQUEST_FACEBOOK_PLAY_URL:                    	HashMap<Integer,Object> facebookMap = (HashMap<Integer, Object>) msg.obj;                    	String facebookUrl = (String) facebookMap.get(Constant.Msg.REQUEST_FACEBOOK_PLAY_URL);                    	HttpActions.requestFacebookPlayUrl(facebookUrl,mOnHttpListener);                    	break;                }            }        };    }    public void sendRequestWithParms (int Msg,Object requestData) {        HashMap<Integer, Object> requestMap = new HashMap<Integer, Object>();        requestMap.put(Msg, requestData);        Message msg = mRequestHandler.obtainMessage(Msg,requestMap);        mRequestHandler.sendMessage(msg);    }    public void sendRequest (int msg) {        mRequestHandler.sendEmptyMessage(msg);    }    public void onDestroy () {        if (mRequestHandlerThread != null) {            mRequestHandlerThread.quit();            mRequestHandlerThread = null;        }    }}